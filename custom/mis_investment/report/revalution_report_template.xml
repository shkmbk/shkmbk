<?xml version="1.0" encoding="utf-8"?>
<odoo>
  <template id="report_revaluation_document">
      <template  id="report_header_custom" inherit_id="report.external_layout_header">
            <t t-if="o and 'company_id' in o">
                <t t-set="company" t-value="o.company_id"/>
            </t>
            <t t-if="not o or not 'company_id' in o">
              <t t-set="company" t-value="res_company"/>
            </t>
            <!--xpath expr="//div[@class='header']" position="replace">
                <div class="header">
                    <div class="row">
                         <div class="col-12">
                              <img src="/mis_auh_report/static/src/img/header.jpg"
                                     style="margin:auto;width:100%;display:block;"/>
                          </div>
                    </div>
                </div>
            </xpath>
      </template>

    <template id="custom_layout_footer" inherit_id="report.external_layout_footer">
        <xpath expr="//div[@class='footer']" position="replace">
            <div class="footer">
                <div class="row">
                    <div class="col-11">
                        <img src="/mis_auh_report/static/src/img/footer.jpg" style="margin:auto;width:100%"/>
                    </div>
                    <div  class="col-1 text-right">
                      <br/>
                            Page: <span class="page"/> / <span class="topage"/>
                    </div>
                </div>
            </div>
        </xpath-->
    </template>
    <t t-call="web.external_layout">
        <t t-set="o" t-value="o.with_context(lang=lang)"/>
        <div class="page">
            <center><h2>Revaluation Report</h2></center>
            <table class="table table-sm o_main_table" style="font-size: 14px;">
                <thead>
                    <tr>
                        <th name="th_description" class="text-left" width="2%"><strong>Sl No</strong></th>
                        <th name="th_description" class="text-left"><strong>Name of Share</strong></th>
                        <th class="text-right"><strong>Qty</strong></th>
                        <th class="text-right"><strong>Closing Price</strong></th>
                        <th class="text-right" ><strong>Closing Amount</strong></th>
                        <th class="text-right"><strong>UnRealize Profit / Loss</strong></th>
                        <th class="text-right"><strong>Realize Profit / Loss</strong></th>
                        <!--th class="text-right"><strong>Cost</strong></th>
                        <th class="text-right"><strong>Amount</strong></th-->
                        <th class="text-right"><strong>Dividend</strong></th>
                        <th class="text-right"><strong>Expenses</strong></th>
                        <th class="text-right" ><strong>Net Profit / Loss</strong></th>
                    </tr>
                </thead>
                <tbody>
                     <t t-set="rowno" t-value="1"/>
					<t t-set="totclsamount" t-value="0.0"/>
					<t t-set="toturpl" t-value="0.0"/>
					<t t-set="totrpl" t-value="0.0"/>
					<t t-set="totdiv" t-value="0.0"/>
					<t t-set="totexp" t-value="0.0"/>
					<t t-set="totnetpl" t-value="0.0"/>
                    <t t-foreach="o.trans_line" t-as="line">
                         <tr>
                              <td name="product">
                                    <span t-esc="rowno"/>
                                    <t t-set="rowno" t-value="rowno+1"/>
                              </td>
                             <td name="product">
                                 <span t-field="line.share_id.name"/>
                             </td>
                             <td class="text-right">
                                    <span t-esc="'{0:,.2f}'.format(line.share_qty)"/>
                             </td>
                             <td class="text-right">
                                    <span t-esc="'{0:,.2f}'.format(line.closingprice)"/>
                             </td>
                             <td class="text-right">
                                    <span t-esc="'{0:,.2f}'.format(line.closing_amount)"/>
									<t t-set="totclsamount" t-value="totclsamount+line.closing_amount"/>
                             </td>
                             <td class="text-right">
                                    <span t-esc="'{0:,.2f}'.format(line.unrealized_profit)"/>
									<t t-set="toturpl" t-value="toturpl+line.unrealized_profit"/>
                             </td>
                             <td class="text-right">
                                    <span t-esc="'{0:,.2f}'.format(line.realized_profit_loss)"/>
									<t t-set="totrpl" t-value="totrpl+line.realized_profit_loss"/>
                             </td>
                             <!--td class="text-right">
                                    <span t-esc="'{0:,.2f}'.format(line.cost)"/>
                             </td>
                             <td class="text-right">
                                    <span t-esc="'{0:,.2f}'.format(line.amount)"/>
                             </td-->
                             <td class="text-right">
                                    <span t-esc="'{0:,.2f}'.format(line.dividend)"/>
									<t t-set="totdiv" t-value="totdiv+line.dividend"/>
                             </td>
                             <td class="text-right">
                                    <span t-esc="'{0:,.2f}'.format(line.brokerage_expense)"/>
									<t t-set="totexp" t-value="totexp+line.brokerage_expense"/>
                             </td>
                             <td class="text-right">
                                    <span t-esc="'{0:,.2f}'.format(line.net_profit_loss)"/>
									<t t-set="totnetpl" t-value="totnetpl+line.net_profit_loss"/>
                             </td>
                         </tr>
                    </t>
						<tr style="width:100%;height:30px;background-color:#d3d3d3;">
							<td colspan="4" style="vertical-align:middle;text-align:lef;padding: 0px 50px;">
							  <b>TOTAL</b>
							</td>
							<td style="vertical-align:middle;text-align:right;">
								<b><span t-esc="'{0:,.2f}'.format((totclsamount))"/></b>
							</td>
							<td style="vertical-align:middle;text-align:right;">
								<b><span t-esc="'{0:,.2f}'.format((toturpl))"/></b>
							</td>
							<td style="vertical-align:middle;text-align:right;">
								<b><span t-esc="'{0:,.2f}'.format((totrpl))"/></b>
							</td>
							<td style="vertical-align:middle;text-align:right;">
								<b><span t-esc="'{0:,.2f}'.format((totdiv))"/></b>
							</td>
							<td style="vertical-align:middle;text-align:right;">
								<b><span t-esc="'{0:,.2f}'.format((totexp))"/></b>
							</td>
							<td style="vertical-align:middle;text-align:right;">
								<b><span t-esc="'{0:,.2f}'.format((totnetpl))"/></b>
							</td>

						</tr>					

                </tbody>
            </table>


        </div>
    </t>
  </template>
    <template id="report_revaluation">
      <t t-call="web.html_container">
        <t t-foreach="docs" t-as="o">
              <t t-call="mis_investment.report_revaluation_document"/>
          </t>
      </t>
    </template>

    <report
        string="Print Revalution"
        id="report_revaluation_print"
        model="mis.invrevaluation"
        report_type="qweb-html"
        name="mis_investment.report_revaluation"
        file="mis_investment.report_revaluation"
    />
</odoo>


